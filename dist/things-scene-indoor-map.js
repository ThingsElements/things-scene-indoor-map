!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports=scene},function(t,e,n){t.exports=n(2)},function(t,e,n){"use strict";n.r(e);var o=n(0);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"action",label:"remove",name:"remove",property:{icon:"remove-circle",action:function(t){var e=t.parent;e.removeComponent(t),e.activeIndex=0,e.invalidate()}}}]},l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,u(e).apply(this,arguments))}var n,r,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o["Container"]),n=e,(r=[{key:"drawLocationMarkers",value:function(t){for(var e in t){var n=t[e],r=n.props||{};if(r.width=r.width||10,r.height=r.height||10,(new Date).getTime()-n.lastUpdateTime<n.updateInterval){var i=this.findById(e);if(i)for(var a in i.set(r),r)i[a]=r[a];else{var u=Object.assign({type:n.type||"rect",id:e,fillStyle:"red",left:r.center.x-.5*r.width,top:r.center.y-.5*r.height,cx:r.center.x,cy:r.center.y},r),c=o.Model.compile(u);this.addComponent(c)}}else{var s=this.findById(e);this.removeComponent(s)}this.invalidate()}}},{key:"simulate",value:function(t){var e=[];for(var n in this.components)if("beacon"==this.components[n].model.type){var o=this.components[n];o.distance=Math.sqrt(Math.pow(o.center.x-t.x,2)+Math.pow(o.center.y-t.y,2)),o.gaussian=gaussian(o.model.txPower||-71,Math.pow(3.209,2)),o.txPower=o.gaussian.ppf(Math.random()),e.push(o)}e=e.slice(0),this.calculatePosition(e,t)}},{key:"calculatePosition",value:function(t,e){var n=t;n.sort(function(t,e){var n=-10*Math.log10(t.distance)+t.txPower,o=-10*Math.log10(e.distance)+e.txPower;return Math.abs(n)-Math.abs(o)});var r=this.k_combinations(n.slice(0,4),3),i=[];for(var a in r){var u=r[a],c=u[0],s=u[1],l=u[2],f=c.center.x,y=c.center.y,p=s.center.x,h=s.center.y,d=l.center.x,b=l.center.y,m=c.distance,v=s.distance,g=l.distance,x=-10*Math.log10(.01*c.distance)+c.txPower,w=-10*Math.log10(.01*s.distance)+s.txPower,k=-10*Math.log10(.01*l.distance)+l.txPower,O=f*f,P=p*p,S=y*y,j=h*h,A=(m=100*this.calculateDistance(c.txPower,x))*m,z=(v=100*this.calculateDistance(s.txPower,w))*v,M=((p-f)*(d*d+b*b-(g=100*this.calculateDistance(l.txPower,k))*g)+(f-d)*(P+j-z)+(d-p)*(O+S-A))/(2*(b*(p-f)+h*(f-d)+y*(d-p))),I=(z-A+O-P+S-j-2*(y-h)*M)/(2*(f-p));Number.isFinite(I)&&Number.isFinite(M)&&i.push({x:I,y:M})}var X=this.averageOfPositions(i);this._simPosition&&this.removeComponent(this._simPosition),this._simPosition=o.Model.compile({type:"ellipse",cx:X.x,cy:X.y,rx:10,ry:10,fillStyle:"navy"}),this.addComponent(this._simPosition)}},{key:"calculateDistance",value:function(t,e){if(0==e)return-1;var n=1*e/t;return n<1?Math.pow(n,10):.89976*Math.pow(n,7.7095)+.111}},{key:"calculateAngle",value:function(t,e,n){var o=Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),r=Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2),i=Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2);return Math.acos((o+r-i)/Math.sqrt(4*o*r))}},{key:"averageOfPositions",value:function(t){var e=0,n=0;for(var o in t){var r=t[o];e+=r.x,n+=r.y}return{x:e/t.length,y:n/t.length}}},{key:"k_combinations",value:function(t,e){var n,o,r,i,a;if(e>t.length||e<=0)return[];if(e==t.length)return[t];if(1==e){for(r=[],n=0;n<t.length;n++)r.push([t[n]]);return r}for(r=[],n=0;n<t.length-e+1;n++)for(i=t.slice(n,n+1),a=this.k_combinations(t.slice(n+1),e-1),o=0;o<a.length;o++)r.push(i.concat(a[o]));return r}},{key:"onclick",value:function(t){}},{key:"hasTextProperty",get:function(){return!1}},{key:"showMoveHandle",get:function(){return!1}},{key:"mutable",get:function(){return!1}},{key:"resizable",get:function(){return!1}},{key:"rotatable",get:function(){return!1}},{key:"nature",get:function(){return s}}])&&i(n.prototype,r),l&&i(n,l),e}();function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function p(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}o.Component.register("floor",l);var m={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"action",label:"floor",name:"floor",property:{icon:"add-circle",action:function(t){t.addFloor()}}}],"value-property":"activeIndex"},v=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,d(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,o["Container"]),n=e,(r=[{key:"ready",value:function(){h(d(e.prototype),"ready",this).call(this),0==this.components.length&&this.addFloor()}},{key:"postrender",value:function(t){if(h(d(e.prototype),"postrender",this).call(this,t),!this.app.isViewMode&&this._focused){for(var n,o,r,i=this.model,a=i.left,u=i.top,c=(i.width,i.fillStyle,0);c<this.components.length;c++){t.beginPath(),t.rect(a-25,u+25*c,25,25);var s=255-20*(c+1)%255;t.fillStyle=(n=s,o=s,r=1,"rgba(".concat(s,", ").concat(n,", ").concat(o,", ").concat(r,")")),t.fill(),t.closePath()}t.beginPath(),t.moveTo(a,u),t.lineTo(a-25,u),t.lineTo(a-25,u+25*this.components.length),t.lineTo(a,u+25*this.components.length),t.strokeStyle="#ccc",t.stroke(),t.closePath()}}},{key:"contains",value:function(t,n){var o=h(d(e.prototype),"contains",this).call(this,t,n);if(this.app.isViewMode)return o;var r=this.bounds,i=r.left,a=r.top;r.width;return o=o||t<Math.max(i-25,i)&&t>Math.min(i-25,i)&&n<Math.max(a+25*this.size(),a)&&n>Math.min(a+25*this.size(),a),this._focused=!!o,this.invalidate(),o}},{key:"onmouseup",value:function(t){var e=this.__down_point;if(delete this.__down_point,e&&e.x==t.offsetX&&e.y==t.offsetY){var n=this.transcoordC2S(t.offsetX,t.offsetY),o=this.model,r=o.left,i=o.top,a=n.x-r,u=n.y-i;a>0||(u/=25,u=Math.floor(u),this.layoutConfig||(this.layoutConfig={}),u>=this.components.length||(this.activeIndex=u))}}},{key:"onmousedown",value:function(t){this.__down_point={x:t.offsetX,y:t.offsetY}}},{key:"addFloor",value:function(){var t=o.Model.compile({type:"floor",fillStyle:"gray",top:0,left:0,width:100,height:100});this.addComponent(t),this.activeIndex=this.components.length-1}},{key:"drawLocationMarkers",value:function(t){this.activeFloor.drawLocationMarkers(t)}},{key:"nature",get:function(){return m}},{key:"layout",get:function(){return o.CardLayout}},{key:"activeIndex",get:function(){return Object.assign({},this.layoutConfig).activeIndex},set:function(t){var e=Object.assign({},this.layoutConfig);e.activeIndex=t,this.layoutConfig=e}},{key:"layoutConfig",get:function(){return this.get("layoutConfig")},set:function(t){this.set("layoutConfig",t)}},{key:"activeFloor",get:function(){return this.components[this.get("layoutConfig").activeIndex]}}])&&y(n.prototype,r),i&&y(n,i),e}();function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function w(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}o.Component.register("indoor-map",v);var P={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"depth",property:"depth"},{type:"number",label:"shelves",name:"shelves",property:"shelves"},{type:"string",label:"location-pattern",name:"locPattern",placeholder:"{z}{s}-{u}-{sh}",property:"locPattern"},{type:"string",label:"zone",name:"zone",property:"zone"},{type:"string",label:"section",name:"section",property:"section"},{type:"string",label:"unit",name:"unit",property:"unit"},{type:"string",label:"shelf-pattern",name:"shelfPattern",placeholder:"#",property:"shelfPattern"}]},S=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,k(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(e,Object(o["RectPath"])(o["Component"])),n=e,(r=[{key:"is3dish",value:function(){return!0}},{key:"draw",value:function(t){var e=this.model,n=e.left,o=e.top,r=e.width,i=e.height,a=e.strokeStyle,u=e.lineWidth,c=e.fillStyle,s=e.alpha,l=void 0===s?1:s;t.beginPath(),t.rect(n,o,r,i),t.strokeStyle=a,t.lineWidth=u,t.globalAlpha=.4*l,t.stroke(),t.beginPath(),t.rect(n+.15*r,o+.15*i,.7*r,.7*i),t.fillStyle=c,t.globalAlpha=.5*l,t.fill(),t.beginPath(),t.moveTo(n,o),t.lineTo(n+r,o+i),t.moveTo(n,o+i),t.lineTo(n+r,o),t.strokeStyle=a,t.lineWidth=u,t.globalAlpha=.4*l,t.stroke()}},{key:"nature",get:function(){return P}},{key:"hasTextProperty",get:function(){return!1}}])&&x(n.prototype,r),i&&x(n,i),e}();function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function z(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}o.Component.register("rack",S);var X={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"z-pos",name:"zPos",property:"zPos"},{type:"string",label:"mac-address",name:"macAddr",property:"macAddress"},{type:"string",label:"identifier",name:"identifier",property:"identifier"},{type:"string",label:"uuid",name:"uuid",property:"uuid"},{type:"number",label:"major",name:"major",property:"major"},{type:"number",label:"minor",name:"minor",property:"minor"}]},C=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),z(this,M(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,Object(o["RectPath"])(o["Component"])),n=e,(r=[{key:"render",value:function(t){this.model.fillStyle={type:"pattern",fitPattern:!0,image:"data:image/png;base64,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"},this.drawFill(t)}},{key:"is3dish",value:function(){return!0}},{key:"nature",get:function(){return X}},{key:"controls",get:function(){}}])&&A(n.prototype,r),i&&A(n,i),e}();function R(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}o.Component.register("beacon",C);var Z=function(){function t(e,n,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e||0,this.y=n||0,this.z=o||0,this.w=void 0===r?1:r}var e,n,o;return e=t,o=[{key:"fromAxis",value:function(e,n){var o=n/2,r=Math.sin(o);return new t(e.x*r,e.y*r,e.z*r,Math.cos(o))}},{key:"fromEuler",value:function(e){var n=1*e.x,o=1*e.y,r=1*e.z,i=Math.cos(o),a=Math.sin(o),u=Math.cos(-r),c=Math.sin(-r),s=Math.cos(n),l=Math.sin(n),f=i*u,y=a*c;return new t(f*l+y*s,a*u*s+i*c*l,i*c*s-a*u*l,f*s-y*l)}}],(n=[{key:"multiply",value:function(e){var n=this.x,o=this.y,r=this.z,i=this.w,a=e.x,u=e.y,c=e.z,s=e.w;return new t(n*s+o*c-r*u+i*a,-n*c+o*s+r*a+i*u,n*u-o*a+r*s+i*c,-n*a-o*u-r*c+i*s)}},{key:"add",value:function(e,n,o,r){var i=this.x,a=this.y,u=this.z,c=this.w;return isNaN(e)?e.add(i,a,u,c):void 0===n?new t(i,a,u,c+e):new t(i+e,a+n,u+o,c+r)}},{key:"multiVec",value:function(t){var e=this.x,n=this.y,o=this.z,r=this.w,i=r*t.x+n*t.z-o*t.y,a=r*t.y+o*t.x-e*t.z,u=r*t.z+e*t.y-n*t.x,c=-e*t.x-n*t.y-o*t.z;return{x:i*r+c*-e+a*-o-u*-n,y:a*r+c*-n+u*-e-i*-o,z:u*r+c*-o+i*-n-a*-e}}},{key:"toString",value:function(){return"[x="+this.x+", y="+this.y+", z="+this.z+", w="+this.w+"]"}},{key:"coords",get:function(){return{x:this.x,y:this.y,z:this.z,w:this.w}}},{key:"array",get:function(){return[this.x,this.y,this.z,this.w]}},{key:"inverse",get:function(){return new t(-this.x,-this.y,-this.z)}},{key:"size",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"norm",get:function(){var e=this.size;return 0===e?new t(0,0,0,0):new t(this.x/e,this.y/e,this.z/e,this.w/e)}}])&&R(e.prototype,n),o&&R(e,o),t}();function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function T(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var W={props:[]},J=[{x:0,y:0,z:0},{x:-50,y:100,z:-100},{x:50,y:100,z:-100},{x:50,y:-100,z:-100},{x:-50,y:-100,z:-100},{x:0,y:0,z:-100},{x:0,y:50,z:-100}];var Q=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,V(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(e,Object(o["RectPath"])(o["Component"])),n=e,i=[{key:"nature",get:function(){return W}}],(r=[{key:"render",value:function(t){var e=this.transformed;this.transformed[5].z>0?(this.__drawLines(t,e),this.__drawRect(t,e)):(this.__drawRect(t,e),this.__drawLines(t,e))}},{key:"__drawLines",value:function(t,e){var n=this.center;t.beginPath(),t.moveTo(n.x+e[0].x,n.y-e[0].y),t.lineTo(n.x+e[1].x,n.y-e[1].y),t.moveTo(n.x+e[0].x,n.y-e[0].y),t.lineTo(n.x+e[2].x,n.y-e[2].y),t.moveTo(n.x+e[0].x,n.y-e[0].y),t.lineTo(n.x+e[3].x,n.y-e[3].y),t.moveTo(n.x+e[0].x,n.y-e[0].y),t.lineTo(n.x+e[4].x,n.y-e[4].y),t.strokeStyle=this.model.strokeStyle,t.stroke(),t.closePath()}},{key:"__drawRect",value:function(t,e){var n=this.center;t.beginPath(),t.moveTo(n.x+e[1].x,n.y-e[1].y),t.lineTo(n.x+e[2].x,n.y-e[2].y),t.lineTo(n.x+e[3].x,n.y-e[3].y),t.lineTo(n.x+e[4].x,n.y-e[4].y),t.lineTo(n.x+e[1].x,n.y-e[1].y),t.fillStyle=this.model.fillStyle,t.strokeStyle=this.model.strokeStyle,t.fill(),t.stroke(),t.beginPath(),t.ellipse(n.x+e[6].x,n.y-e[6].y,5,5,0,0,2*Math.PI),t.stroke()}},{key:"onchange",value:function(t,e){if(t.hasOwnProperty("data")){var n=t.data;if(!n.hasOwnProperty("yaw")&&!n.hasOwnProperty("pitch")&&!n.hasOwnProperty("roll"))return;this.set({yaw:n.yaw,pitch:n.pitch,roll:n.roll})}else if(t.hasOwnProperty("yaw")||t.hasOwnProperty("pitch")||t.hasOwnProperty("roll")){var o=this,r=t.yaw-e.yaw,i=t.pitch-e.pitch,a=t.roll-e.roll;this._anim_alpha_yaw=r,this._anim_alpha_pitch=i,this._anim_alpha_roll=a,this.animate({step:function(t){o._anim_alpha_yaw=r*(1-t),o._anim_alpha_pitch=i*(1-t),o._anim_alpha_roll=a*(1-t),o.invalidate()},duration:1e3,delta:"circ",options:{x:1},ease:"inout"}).start()}}},{key:"transformed",get:function(){var t=this.model,e=t.yaw,n=void 0===e?0:e,o=t.pitch,r=void 0===o?0:o,i=t.roll,a=void 0===i?0:i;return function(t,e,n,o){var r=Z.fromAxis({x:1,y:0,z:0},e),i=Z.fromAxis({x:0,y:1,z:0},n),a=Z.fromAxis({x:0,y:0,z:1},o).multiply(i).multiply(r);return t.map(function(t){return a.multiVec(t)})}(J,r-(this._anim_alpha_pitch||0),a-(this._anim_alpha_roll||0),n-(this._anim_alpha_yaw||0))}}])&&L(n.prototype,r),i&&L(n,i),e}();o.Component.register("camera",Q),n.d(e,"Floor",function(){return l}),n.d(e,"IndoorMap",function(){return v}),n.d(e,"Rack",function(){return S}),n.d(e,"Beacon",function(){return C}),n.d(e,"Camera",function(){return Q}),n.d(e,"Quaternion",function(){return Z})}]);
//# sourceMappingURL=things-scene-indoor-map.js.map