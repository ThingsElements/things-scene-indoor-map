!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e){t.exports=scene},function(t,e,r){t.exports=r(2)},function(t,e,r){"use strict";r.r(e);var n=r(0),i={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"action",label:"remove",name:"remove",property:{icon:"remove-circle",action:function(t){var e=t.parent;e.removeComponent(t),e.activeIndex=0,e.invalidate()}}}]};class a extends n.Container{get hasTextProperty(){return!1}get showMoveHandle(){return!1}get mutable(){return!1}get resizable(){return!1}get rotatable(){return!1}get nature(){return i}drawLocationMarkers(t){for(var e in t){var r=t[e],i=r.props||{};if(i.width=i.width||10,i.height=i.height||10,(new Date).getTime()-r.lastUpdateTime<r.updateInterval){var a=this.findById(e);if(a)for(var o in a.set(i),i)a[o]=i[o];else{var s=Object.assign({type:r.type||"rect",id:e,fillStyle:"red",left:i.center.x-.5*i.width,top:i.center.y-.5*i.height,cx:i.center.x,cy:i.center.y},i),l=n.Model.compile(s);this.addComponent(l)}}else{var h=this.findById(e);this.removeComponent(h)}this.invalidate()}}simulate(t){var e=[];for(var r in this.components)if("beacon"==this.components[r].model.type){var n=this.components[r];n.distance=Math.sqrt(Math.pow(n.center.x-t.x,2)+Math.pow(n.center.y-t.y,2)),n.gaussian=gaussian(n.model.txPower||-71,Math.pow(3.209,2)),n.txPower=n.gaussian.ppf(Math.random()),e.push(n)}e=e.slice(0),this.calculatePosition(e,t)}calculatePosition(t,e){var r=t;r.sort(function(t,e){var r=-10*Math.log10(t.distance)+t.txPower,n=-10*Math.log10(e.distance)+e.txPower;return Math.abs(r)-Math.abs(n)});var i=this.k_combinations(r.slice(0,4),3),a=[];for(var o in i){var s=i[o],l=s[0],h=s[1],c=s[2],p=l.center.x,d=l.center.y,y=h.center.x,u=h.center.y,f=c.center.x,x=c.center.y,m=l.distance,g=h.distance,v=c.distance,b=-10*Math.log10(.01*l.distance)+l.txPower,w=-10*Math.log10(.01*h.distance)+h.txPower,A=-10*Math.log10(.01*c.distance)+c.txPower,z=p*p,M=y*y,P=d*d,k=u*u,I=(m=100*this.calculateDistance(l.txPower,b))*m,O=(g=100*this.calculateDistance(h.txPower,w))*g,X=((y-p)*(f*f+x*x-(v=100*this.calculateDistance(c.txPower,A))*v)+(p-f)*(M+k-O)+(f-y)*(z+P-I))/(2*(x*(y-p)+u*(p-f)+d*(f-y))),S=(O-I+z-M+P-k-2*(d-u)*X)/(2*(p-y));Number.isFinite(S)&&Number.isFinite(X)&&a.push({x:S,y:X})}var Z=this.averageOfPositions(a);this._simPosition&&this.removeComponent(this._simPosition),this._simPosition=n.Model.compile({type:"ellipse",cx:Z.x,cy:Z.y,rx:10,ry:10,fillStyle:"navy"}),this.addComponent(this._simPosition)}calculateDistance(t,e){if(0==e)return-1;var r=1*e/t;return r<1?Math.pow(r,10):.89976*Math.pow(r,7.7095)+.111}calculateAngle(t,e,r){var n=Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),i=Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2),a=Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2);return Math.acos((n+i-a)/Math.sqrt(4*n*i))}averageOfPositions(t){var e=0,r=0;for(var n in t){var i=t[n];e+=i.x,r+=i.y}return{x:e/t.length,y:r/t.length}}k_combinations(t,e){var r,n,i,a,o;if(e>t.length||e<=0)return[];if(e==t.length)return[t];if(1==e){for(i=[],r=0;r<t.length;r++)i.push([t[r]]);return i}for(i=[],r=0;r<t.length-e+1;r++)for(a=t.slice(r,r+1),o=this.k_combinations(t.slice(r+1),e-1),n=0;n<o.length;n++)i.push(a.concat(o[n]));return i}onclick(t){}}n.Component.register("floor",a);var o=25,s=25;var l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"action",label:"floor",name:"floor",property:{icon:"add-circle",action:function(t){t.addFloor()}}}],"value-property":"activeIndex"};class h extends n.Container{get nature(){return l}get layout(){return n.CardLayout}set activeIndex(t){var e=Object.assign({},this.layoutConfig);e.activeIndex=t,this.set("layoutConfig",e)}get activeFloor(){return this.components[this.get("layoutConfig").activeIndex]}postrender(t){if(super.postrender(t),!this.app.isViewMode&&this._focused)for(var{left:e,top:r,width:n,fillStyle:i}=this.model,a=0;a<this.components.length;a++){t.beginPath(),t.rect(e-o,r+a*s,o,s);var l=255-20*(a+1)%255;t.fillStyle=`rgba(${l}, ${l}, ${l}, ${1})`,t.fill(),t.closePath()}}contains(t,e){var r=super.contains(t,e);if(this.app.isViewMode)return r;var{left:n,top:i,width:a,height:l}=this.bounds,h=s;return r=r||t<Math.max(n-o,n)&&t>Math.min(n-o,n)&&e<Math.max(i+h*this.size(),i)&&e>Math.min(i+h*this.size(),i),this._focused=!!r,this.invalidate(),r}onmouseup(t){var e=this.__down_point;if(delete this.__down_point,e&&e.x==t.offsetX&&e.y==t.offsetY){var r=this.transcoordC2S(t.offsetX,t.offsetY),{left:n,top:i}=this.model,a=r.x-n,o=r.y-i;if(!(a>0||(o/=s,o=Math.floor(o),this.layoutConfig||(this.layoutConfig={}),o>=this.components.length))){var l=Object.assign({},this.layoutConfig);l.activeIndex=o,this.set("layoutConfig",l)}}}onmousedown(t){this.__down_point={x:t.offsetX,y:t.offsetY}}addFloor(){var t=n.Model.compile({type:"floor",fillStyle:"gray",top:0,left:0,width:100,height:100});this.addComponent(t)}drawLocationMarkers(t){this.activeFloor.drawLocationMarkers(t)}}n.Component.register("indoor-map",h);var c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"depth",name:"depth",property:"depth"},{type:"number",label:"shelves",name:"shelves",property:"shelves"},{type:"string",label:"location-pattern",name:"locPattern",placeholder:"{z}{s}-{u}-{sh}",property:"locPattern"},{type:"string",label:"zone",name:"zone",property:"zone"},{type:"string",label:"section",name:"section",property:"section"},{type:"string",label:"unit",name:"unit",property:"unit"},{type:"string",label:"shelf-pattern",name:"shelfPattern",placeholder:"#",property:"shelfPattern"}]};class p extends(Object(n.RectPath)(n.Component)){is3dish(){return!0}draw(t){var{left:e,top:r,width:n,height:i,strokeStyle:a,lineWidth:o,fillStyle:s,alpha:l=1}=this.model;t.beginPath(),t.rect(e,r,n,i),t.strokeStyle=a,t.lineWidth=o,t.globalAlpha=.4*l,t.stroke(),t.beginPath(),t.rect(e+.15*n,r+.15*i,.7*n,.7*i),t.fillStyle=s,t.globalAlpha=.5*l,t.fill(),t.beginPath(),t.moveTo(e,r),t.lineTo(e+n,r+i),t.moveTo(e,r+i),t.lineTo(e+n,r),t.strokeStyle=a,t.lineWidth=o,t.globalAlpha=.4*l,t.stroke()}get nature(){return c}get hasTextProperty(){return!1}}n.Component.register("rack",p);var d={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"z-pos",name:"zPos",property:"zPos"},{type:"string",label:"mac-address",name:"macAddr",property:"macAddress"},{type:"string",label:"identifier",name:"identifier",property:"identifier"},{type:"string",label:"uuid",name:"uuid",property:"uuid"},{type:"number",label:"major",name:"major",property:"major"},{type:"number",label:"minor",name:"minor",property:"minor"}]};class y extends(Object(n.RectPath)(n.Component)){render(t){this.model.fillStyle={type:"pattern",fitPattern:!0,image:"data:image/png;base64,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"},this.drawFill(t)}is3dish(){return!0}get nature(){return d}get controls(){}}n.Component.register("beacon",y);class u{constructor(t,e,r,n){this.x=t||0,this.y=e||0,this.z=r||0,this.w=void 0===n?1:n}multiply(t){var{x:e,y:r,z:n,w:i}=this,a=t.x,o=t.y,s=t.z,l=t.w;return new u(e*l+r*s-n*o+i*a,-e*s+r*l+n*a+i*o,e*o-r*a+n*l+i*s,-e*a-r*o-n*s+i*l)}add(t,e,r,n){var{x:i,y:a,z:o,w:s}=this;return isNaN(t)?t.add(i,a,o,s):void 0===e?new u(i,a,o,s+t):new u(i+t,a+e,o+r,s+n)}get coords(){return{x:this.x,y:this.y,z:this.z,w:this.w}}get array(){return[this.x,this.y,this.z,this.w]}get inverse(){return new u(-this.x,-this.y,-this.z)}get size(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}get norm(){var t=this.size;return 0===t?new u(0,0,0,0):new u(this.x/t,this.y/t,this.z/t,this.w/t)}static fromAxis(t,e){var r=e/2,n=Math.sin(r);return new u(t.x*n,t.y*n,t.z*n,Math.cos(r))}static fromEuler(t){var e=1*t.x,r=1*t.y,n=1*t.z,i=Math.cos(r),a=Math.sin(r),o=Math.cos(-n),s=Math.sin(-n),l=Math.cos(e),h=Math.sin(e),c=i*o,p=a*s;return new u(c*h+p*l,a*o*l+i*s*h,i*s*l-a*o*h,c*l-p*h)}multiVec(t){var{x:e,y:r,z:n,w:i}=this,a=i*t.x+r*t.z-n*t.y,o=i*t.y+n*t.x-e*t.z,s=i*t.z+e*t.y-r*t.x,l=-e*t.x-r*t.y-n*t.z;return{x:a*i+l*-e+o*-n-s*-r,y:o*i+l*-r+s*-e-a*-n,z:s*i+l*-n+a*-r-o*-e}}toString(){return"[x="+this.x+", y="+this.y+", z="+this.z+", w="+this.w+"]"}}var f={props:[]},x=[{x:0,y:0,z:0},{x:-50,y:100,z:-100},{x:50,y:100,z:-100},{x:50,y:-100,z:-100},{x:-50,y:-100,z:-100},{x:0,y:0,z:-100},{x:0,y:50,z:-100}];class m extends(Object(n.RectPath)(n.Component)){render(t){var e=this.transformed;this.transformed[5].z>0?(this.__drawLines(t,e),this.__drawRect(t,e)):(this.__drawRect(t,e),this.__drawLines(t,e))}get transformed(){var{yaw:t=0,pitch:e=0,roll:r=0}=this.model;return function(t,e,r,n){var i=u.fromAxis({x:1,y:0,z:0},e),a=u.fromAxis({x:0,y:1,z:0},r),o=u.fromAxis({x:0,y:0,z:1},n).multiply(a).multiply(i);return t.map(t=>o.multiVec(t))}(x,e-(this._anim_alpha_pitch||0),r-(this._anim_alpha_roll||0),t-(this._anim_alpha_yaw||0))}static get nature(){return f}__drawLines(t,e){var r=this.center;t.beginPath(),t.moveTo(r.x+e[0].x,r.y-e[0].y),t.lineTo(r.x+e[1].x,r.y-e[1].y),t.moveTo(r.x+e[0].x,r.y-e[0].y),t.lineTo(r.x+e[2].x,r.y-e[2].y),t.moveTo(r.x+e[0].x,r.y-e[0].y),t.lineTo(r.x+e[3].x,r.y-e[3].y),t.moveTo(r.x+e[0].x,r.y-e[0].y),t.lineTo(r.x+e[4].x,r.y-e[4].y),t.strokeStyle=this.model.strokeStyle,t.stroke(),t.closePath()}__drawRect(t,e){var r=this.center;t.beginPath(),t.moveTo(r.x+e[1].x,r.y-e[1].y),t.lineTo(r.x+e[2].x,r.y-e[2].y),t.lineTo(r.x+e[3].x,r.y-e[3].y),t.lineTo(r.x+e[4].x,r.y-e[4].y),t.lineTo(r.x+e[1].x,r.y-e[1].y),t.fillStyle=this.model.fillStyle,t.strokeStyle=this.model.strokeStyle,t.fill(),t.stroke(),t.beginPath(),t.ellipse(r.x+e[6].x,r.y-e[6].y,5,5,0,0,2*Math.PI),t.stroke()}onchange(t,e){if(t.hasOwnProperty("data")){var r=t.data;if(!r.hasOwnProperty("yaw")&&!r.hasOwnProperty("pitch")&&!r.hasOwnProperty("roll"))return;this.set({yaw:r.yaw,pitch:r.pitch,roll:r.roll})}else if(t.hasOwnProperty("yaw")||t.hasOwnProperty("pitch")||t.hasOwnProperty("roll")){var n=this,i=t.yaw-e.yaw,a=t.pitch-e.pitch,o=t.roll-e.roll;this._anim_alpha_yaw=i,this._anim_alpha_pitch=a,this._anim_alpha_roll=o,this.animate({step:function(t){n._anim_alpha_yaw=i*(1-t),n._anim_alpha_pitch=a*(1-t),n._anim_alpha_roll=o*(1-t),n.invalidate()},duration:1e3,delta:"circ",options:{x:1},ease:"inout"}).start()}}}n.Component.register("camera",m),r.d(e,"Floor",function(){return a}),r.d(e,"IndoorMap",function(){return h}),r.d(e,"Rack",function(){return p}),r.d(e,"Beacon",function(){return y}),r.d(e,"Camera",function(){return m}),r.d(e,"Quaternion",function(){return u})}]);
//# sourceMappingURL=things-scene-indoor-map.js.map